import puppeteer from "puppeteer"
import path from "path"
import { fileURLToPath } from 'url';
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);
import md5  from "md5";

// console.log( path.join(__dirname,"../PDF/profile.pdf"))
const renderPDF  = async (url) => {
    const browser = await puppeteer.launch();
    const page = await browser.newPage();
    
    
    await page.goto(url, { waitUntil: 'networkidle0' });
    await page.setViewport({width: 1080, height: 1024});
    // Đường dẫn tới tệp PDF muốn lưu
    const pdfPath = path.join(__dirname,"../PDF/profile.pdf");
    
    // Tạo PDF từ trang web và lưu vào đường dẫn đã chỉ định
  let pdf = await page.pdf({ path: pdfPath, format: 'A4' });
  
    console.log(`PDF đã được tạo thành công tại: ${pdfPath}`);
  
    await browser.close();
  };

  export {renderPDF}