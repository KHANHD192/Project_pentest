import express from "express"
import configViewEngine from "./config/viewEngine.js"
import path from "path"
import { fileURLToPath } from 'url';
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);
import Router from "./routes/webroute.js";
import fs from 'fs'
import {configData } from "./config/handledata.js";
// import {configLayout} from "./config/layout.js"
import { handl404 } from "./middleware/404.js";
import expressLayouts  from "express-ejs-layouts";


const app  = express()

//config view engine 
configViewEngine(app,__dirname)
//handl layout
// configLayout(app)
// app.use(expressLayouts)
//handle data 
configData(app)

//hand main route
app.use("/",Router)

//handle 404 not found 
app.use(handl404)
//bind 
app.listen(3000,()=>{
    console.log(`Server is running on http://localhost:3000`)
})