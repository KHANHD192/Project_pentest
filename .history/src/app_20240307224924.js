import express from "express"
import configViewEngine from "./config/viewEngine.js"
import path from "path"
import { fileURLToPath } from 'url';
import Router from "./routes/webroute.js";
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);
import fs from 'fs'
// import * as renderPDF from "./service/renderPDF.js"
const app  = express()

//config view engine 
configViewEngine(app,__dirname)


// Đường dẫn đến tệp PDF
const pdfFilePath = 'example1.pdf';

app.get('/pdf', (req, res) => {
    // Đọc nội dung của tệp PDF
    fs.readFile(pdfFilePath, (err, data) => {
        if (err) {
            console.log(err)
            res.status(500).send('Error reading PDF file');
            return;
        }

        // Thiết lập header
        res.setHeader('Content-Type', 'application/pdf');
        res.setHeader('Content-Disposition', 'inline');
        res.setHeader('Content-Length', data.length);

        // Gửi nội dung của tệp PDF đến trình duyệt
        res.send(data);
    });
});
app.use("/",Router)
//bind 
app.listen(3000,()=>{
    console.log(`Server is running on http://localhost:3000`)
})